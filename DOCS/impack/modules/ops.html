<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>impack</h1>

<ul>
  <li><a href="../api.html">Index</a></li>
</ul>



<h2>Functions</h2>
<ul class="nowrap">
    <li><a href="#box_filter">box_filter (input, input_w, input_h, kernel_w, kernel_h, opts)</a></li>
    <li><a href="#floats_to_unorm8s">floats_to_unorm8s (input, w, h, opts)</a></li>
    <li><a href="#resize_custom">resize_custom (input, iw, ih, ow, oh, nchannels, opts)</a></li>
    <li><a href="#resize_region">resize_region (input, iw, ih, ow, oh, nchannels, s0, t0, s1, t1, opts)</a></li>
    <li><a href="#resize_rgb">resize_rgb (input, iw, ih, ow, oh, nchannels, opts)</a></li>
    <li><a href="#resize_rgba">resize_rgba (input, iw, ih, ow, oh, opts)</a></li>
    <li><a href="#resize_subpixel">resize_subpixel (input, iw, ih, ow, oh, nchannels, xscale, yscale, xoff, yoff, opts)</a></li>
    <li><a href="#rotate">rotate (input, w, h, angle, opts)</a></li>
    <li><a href="#unorm8s_to_floats">unorm8s_to_floats (input, w, h, opts)</a></li>
</ul>
<h2>Tables</h2>
<ul class="nowrap">
    <li><a href="#DataType">DataType</a></li>
    <li><a href="#EdgeMode">EdgeMode</a></li>
    <li><a href="#Filter">Filter</a></li>
    <li><a href="#ColorSpace">ColorSpace</a></li>
    <li><a href="#ResizeFlags">ResizeFlags</a></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/grayscale.html">grayscale</a></li>
  <li><a href="../modules/image.html">image</a></li>
  <li><strong>ops</strong></li>
  <li><a href="../modules/write.html">write</a></li>
</ul>
<h2>Classes</h2>
<ul class="nowrap">
  <li><a href="../classes/SpotColor.html">SpotColor</a></li>
  <li><a href="../classes/SpotImage.html">SpotImage</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>ops</code></h1>
<p>An assortment of useful image operations.</p>
<p>


<p> Most image resize logic comes courtesy of Jorge L Rodriguez (@VinoBS), via Sean Barrett's <a href="https://github.com/nothings/stb">stb</a>.</p>

<p> The <strong>Bytes</strong> type&mdash;specified below&mdash;may be any object that implements <a href="https://ggcrunchy.github.io/corona-plugin-docs/DOCS/ByteReader/policy.html">ByteReader</a>,
 including strings.</p>

<p> Various routines build upon the <a href="https://developer.apple.com/reference/accelerate">Accelerate framework</a>, <a href="https://projectne10.github.io/Ne10/">Project Ne10</a>,
 <a href="https://github.com/Microsoft/DirectXMath">DirectXMath</a>, and <a href="https://github.com/Napoleon314/XMath">XMath</a>.</p>

<hr/>

<p> <strong>(The comments that follow were adapted from <a href="https://raw.githubusercontent.com/nothings/stb/master/stb_image_resize.h">stb_image_resize.h</a>.)</strong></p>

<p> Written with emphasis on usability, portability, and efficiency. (No
 SIMD or threads, so it's easily outperformed by libs that use those.)
 Only scaling and translation is supported, no rotations or shears.
 By default, the API downsamples with Mitchell filter, upsamples with
 cubic interpolation.</p>

<p> <strong>QUICKSTART</strong></p>


<pre>
output_pixels = impack.ops.resize_custom(input_pixels, in_w, in_h,
                         out_w, out_h, num_channels)
output_pixels = impack.ops.resize_custom(input_pixels, in_w, in_h,
                         out_w, out_h, num_channels, { datatype = <span class="string">"FLOAT"</span> })
output_pixels = impack.ops.resize_custom(input_pixels, in_w, in_h,
                         out_w, out_h, num_channels, { has_alpha = alpha_chan, space = <span class="string">"SRGB"</span> })
output_pixels = impack.ops.resize_custom(input_pixels, in_w, in_h,
                         out_w, out_h, num_channels, {
                              has_alpha = alpha_chan, space = <span class="string">"SRGB"</span>,
                              wrap = <span class="string">"CLAMP"</span> <span class="comment">-- or "WRAP", "REFLECT", "ZERO"
</span>                          })
</pre>

<p> <strong>Additional documentation:</strong></p>

<p> <strong>SRGB &amp; FLOATING POINT REPRESENTATION</strong></p>

<p> The sRGB functions presume IEEE floating point.</p>

<p> <strong>ALPHA CHANNEL</strong></p>

<p> Most of the resizing functions provide the ability to control how
 the alpha channel of an image is processed. The important things
 to know about this:</p>

<p> <strong>1.</strong> The best mathematically-behaved version of alpha to use is
 called "premultiplied alpha", in which the other color channels
 have had the alpha value multiplied in. If you use premultiplied
 alpha, linear filtering (such as image resampling done by this
 library, or performed in texture units on GPUs) does the "right
 thing". While premultiplied alpha is standard in the movie CGI
 industry, it is still uncommon in the videogame / real-time world.</p>

<p> If you linearly filter non-premultiplied alpha, strange effects
 occur. (For example, the average of 1% opaque bright green
 and 99% opaque black produces 50% transparent dark green when
 non-premultiplied, whereas premultiplied it produces 50%
 transparent near-black. The former introduces green energy
 that doesn't exist in the source image.)</p>

<p> <strong>2.</strong> Artists should not edit premultiplied-alpha images; artists
 want non-premultiplied alpha images. Thus, art tools generally output
 non-premultiplied alpha images.</p>

<p> <strong>3.</strong> You will get best results in most cases by converting images
 to premultiplied alpha before processing them mathematically.</p>

<p> <strong>4.</strong> If you pass the flag <strong>"ALPHA_PREMULTIPLIED"</strong>, the
 resizer does not do anything special for the alpha channel;
 it is resampled identically to other channels. This produces
 the correct results for premultiplied-alpha images, but produces
 less-than-ideal results for non-premultiplied-alpha images.</p>

<p> <strong>5.</strong> If you do not pass the flag <strong>"ALPHA_PREMULTIPLIED"</strong>,
 then the resizer weights the contribution of input pixels
 based on their alpha values, or, equivalently, it multiplies
 the alpha value into the color channels, resamples, then divides
 by the resultant alpha value. Input pixels which have alpha = 0 do
 not contribute at all to output pixels unless <em>all</em> of the input
 pixels affecting that output pixel have alpha = 0, in which case
 the result for that pixel is the same as it would be without
 <strong>"ALPHA_PREMULTIPLIED"</strong>. However, this is only true for
 input images in integer formats. For input images in float format,
 input pixels with alpha = 0 have no effect, and output pixels
 which have alpha = 0 will be 0 in all channels. (For float images,
 you can manually achieve the same result by adding a tiny epsilon
 value to the alpha channel of every image, and then subtracting
 or clamping it at the end.)</p>

<p> <strong>6.</strong> You can separately control whether the alpha channel is
 interpreted as linear or affected by the colorspace. By default
 it is linear; you almost never want to apply the colorspace.
 (For example, graphics hardware does not apply sRGB conversion
 to the alpha channel.)</p>

<p> <strong>ADDITIONAL CONTRIBUTORS</strong></p>

<p> Sean Barrett: API design, optimizations</p>

<hr/>

<p> <strong>From stb's project page:</strong></p>

<p> This software is dual-licensed to the public domain and under the following
 license: you are granted a perpetual, irrevocable license to copy, modify,
 publish, and distribute this file as you see fit.</p>

<hr/>

<p> <strong>From <a href="https://raw.githubusercontent.com/projectNe10/Ne10/master/LICENSE">NE10's license</a>:</strong></p>

<p> Copyright 2012-15 ARM Limited and Contributors.
 All rights reserved.</p>

<p> Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:</p>

<ul>
    <li><p>Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.</p></li>
    <li><p>Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the
    documentation and/or other materials provided with the distribution.</p></li>
    <li><p>Neither the name of ARM Limited nor the
    names of its contributors may be used to endorse or promote products
    derived from this software without specific prior written permission.</p></li>
</ul>

<p> THIS SOFTWARE IS PROVIDED BY ARM LIMITED AND CONTRIBUTORS "AS IS" AND
 ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 DISCLAIMED. IN NO EVENT SHALL ARM LIMITED AND CONTRIBUTORS BE LIABLE FOR ANY
 DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>

<p> See: <a href="http://opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> for template</p>

<hr/>
</p>



    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "box_filter"></a>
    <strong>box_filter (input, input_w, input_h, kernel_w, kernel_h, opts)</strong>
    </dt>
    <dd>
    Given some image data, find the results of applying a box filter to it. </p>

<p> On iPhone and capable Android devices, this will use a <a href="https://projectne10.github.io/Ne10/doc/group__IMG__BOXFILTER.html#gac9ffee47cb54608ada3cf82a6c589924">NEON-optimized routine</a>
 when both kernel dimensions are between 2 and 127, inclusive. Mac and tvOS use an <a href="https://developer.apple.com/reference/accelerate/1515923-vimageconvolve_argb8888">Accelerate framework routine</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">Bytes</span></span>
         Input image, in RGBA form.
        </li>
        <li><span class="parameter">input_w</span>
            <span class="types"><span class="type">uint</span></span>
         Width of <em>input</em>...
        </li>
        <li><span class="parameter">input_h</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">kernel_w</span>
            <span class="types"><span class="type">uint</span></span>
         Width of kernel, from 1 to <em>input_w</em>... (The Accelerate technique will adjust this, if necessary.)
        </li>
        <li><span class="parameter">kernel_h</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height, from 1 to <em>input_h</em>. (Ditto.)
        </li>
        <li><span class="parameter">opts</span>
            <span class="types">optional <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>

<p> Filter options, which include:</p>

<ul>
    <li><strong>in_stride</strong>: Bytes per row on input image (<em>w</em> * 4 by default, the minimum)...</li>
    <li><strong>out_stride</strong>: ...and on output image (again, defaults to <em>w</em> * 4).</li>
    <li><strong>as_userdata</strong>: Affects how the image data is returned.</li>
</ul>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">Bytes</span></span>
         On success, output of the box filter, in RGBA form.</p>

<p> If <em>opts.as_userdata</em> was true, the data is returned as a userdata that implements <strong>ByteReader</strong>,
 rather than being converted to a more friendly string. Under some circumstances, this might be worth
 doing for performance reasons.
    </ol>
     <h3>Or</h3>
    <ol>
        <li>
        <strong>nil</strong>, indicating an error.</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Error message.</li>
    </ol>




</dd>
    <dt>
    <a name = "floats_to_unorm8s"></a>
    <strong>floats_to_unorm8s (input, w, h, opts)</strong>
    </dt>
    <dd>
    Converts an image from to floating-point to normalized unsigned 8-bit form, i.e.  floats in [0, 1] are
 remapped to [0, 255].


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">Bytes</span></span>
         Input image, in floating-point form.
        </li>
        <li><span class="parameter">w</span>
            <span class="types"><span class="type">uint</span></span>
         Width of <em>input</em>...
        </li>
        <li><span class="parameter">h</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">opts</span>
            <span class="types">optional <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Conversion options. At the moment, the only option is <strong>channels</strong>, describing the
 number of channels per pixel (by default 4, in keeping with RGBA).
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">Bytes</span></span>
        On success, the converted result, in normalized unsigned 8-bit form.
    </ol>
     <h3>Or</h3>
    <ol>
        <li>
        <strong>nil</strong>, indicating an error.</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Error message.</li>
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="../modules/ops.html#unorm8s_to_floats">unorm8s_to_floats</a>
    </ul>


</dd>
    <dt>
    <a name = "resize_custom"></a>
    <strong>resize_custom (input, iw, ih, ow, oh, nchannels, opts)</strong>
    </dt>
    <dd>
    Generalized variant of <a href="../modules/ops.html#resize_rgb">resize_rgb</a> and <a href="../modules/ops.html#resize_rgba">resize_rgba</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">Bytes</span></span>
         Input image, in <em>nchannels</em>-per-pixel form, according to <em>datatype</em>.
        </li>
        <li><span class="parameter">iw</span>
            <span class="types"><span class="type">uint</span></span>
         Input image width...
        </li>
        <li><span class="parameter">ih</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">ow</span>
            <span class="types"><span class="type">uint</span></span>
         Output image width...
        </li>
        <li><span class="parameter">oh</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">nchannels</span>
            <span class="types"><span class="type">uint</span></span>
         Number of color channels.
        </li>
        <li><span class="parameter">opts</span>
            <span class="types">optional <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>

<p> Resize options. These include all the options from <a href="../modules/ops.html#box_filter">box_filter</a>, though the strides
 default to <em>w</em> * <em>nchannels</em> * <strong>bytes_per_component</strong>(<em>datatype</em>).</p>

<p> Additionally, the following are available:</p>

<ul>
    <li><strong>flags</strong>: May be a string or array of strings, consisting of entries from <a href="../modules/ops.html#ResizeFlags">ResizeFlags</a>. If unsure
    what these mean, leaving them blank will probably do the right thing.</li>
    <li><strong>has_alpha</strong>: If true, the image has an alpha channel. This may be an integer between 1 and <em>nchannels</em>, inclusive,
    indicating which channel to treat as alpha. Otherwise, the index is assumed to be <em>nchannels</em>. (No alpha is the default.)</li>
    <li><strong>datatype</strong>: May be one of the <a href="../modules/ops.html#DataType">DataType</a> entries (a string), indicating the component data type. Defaults to
    <strong>"UINT8"</strong>.</li>
    <li><strong>wrap</strong>: May be one of the <a href="../modules/ops.html#EdgeMode">EdgeMode</a> entries (a string), indicating the edge-sampling behavior. Defaults to
    <strong>"CLAMP"</strong>.</li>
    <li><strong>hwrap</strong>: If present, an <a href="../modules/ops.html#EdgeMode">EdgeMode</a> entry (that overrides <strong>wrap</strong>) describing horizontal behavior...</li>
    <li><strong>vwrap</strong>: ...likewise, for vertical edge-sampling.</li>
    <li><strong>filter</strong>:  May be one of the <a href="../modules/ops.html#Filter">Filter</a> entries (a string), indicating the color filtering behavior. Naturally,
    <strong>"DEFAULT"</strong> is the default.</li>
    <li><strong>hfilter</strong>: If present, a <a href="../modules/ops.html#Filter">Filter</a> entry (that overrides <strong>filter</strong>) describing horizontal behavior...</li>
    <li><strong>vfilter</strong>: ...likewise, for vertical filtering.</li>
    <li><strong>space</strong>: May be one of the <a href="../modules/ops.html#ColorSpace">ColorSpace</a> entries (a string), describing how colors are understood. By default,
    <strong>"LINEAR"</strong>.</li>
</ul>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">Bytes</span></span>
        On success, as per <a href="../modules/ops.html#box_filter">box_filter</a>; will match <em>input</em> in form.
    </ol>
     <h3>Or</h3>
    <ol>
        <li>
        <strong>nil</strong>, indicating an error.</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Error message.</li>
    </ol>




</dd>
    <dt>
    <a name = "resize_region"></a>
    <strong>resize_region (input, iw, ih, ow, oh, nchannels, s0, t0, s1, t1, opts)</strong>
    </dt>
    <dd>
    Variant of <a href="../modules/ops.html#resize_custom">resize_custom</a> that allows you to specify the image source tile using texture coordinates, i.e.
 (<em>s0</em>, <em>t0</em>) and (<em>s1</em>, <em>t1</em>) are the top-left and bottom-right corner (uv addressing style: [0, 1] &times; [0, 1])
 of a region of the input image to use.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">Bytes</span></span>
         As per <a href="../modules/ops.html#resize_custom">resize_custom</a>.
        </li>
        <li><span class="parameter">iw</span>
            <span class="types"><span class="type">uint</span></span>
         Input image width...
        </li>
        <li><span class="parameter">ih</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">ow</span>
            <span class="types"><span class="type">uint</span></span>
         Output image width...
        </li>
        <li><span class="parameter">oh</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">nchannels</span>
            <span class="types"><span class="type">uint</span></span>
         Number of color channels.
        </li>
        <li><span class="parameter">s0</span>
            <span class="types"><span class="type">number</span></span>
         Upper-left coordinate, u-component...
        </li>
        <li><span class="parameter">t0</span>
            <span class="types"><span class="type">number</span></span>
         ...and v-component.
        </li>
        <li><span class="parameter">s1</span>
            <span class="types"><span class="type">number</span></span>
         Bottom-right coordinate, u-component...
        </li>
        <li><span class="parameter">t1</span>
            <span class="types"><span class="type">number</span></span>
         ...and v-component.
        </li>
        <li><span class="parameter">opts</span>
            <span class="types">optional <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
          As per <a href="../modules/ops.html#resize_custom">resize_custom</a>.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">Bytes</span></span>
        On success, as per <a href="../modules/ops.html#box_filter">box_filter</a>; will match <em>input</em> in form.
    </ol>
     <h3>Or</h3>
    <ol>
        <li>
        <strong>nil</strong>, indicating an error.</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Error message.</li>
    </ol>




</dd>
    <dt>
    <a name = "resize_rgb"></a>
    <strong>resize_rgb (input, iw, ih, ow, oh, nchannels, opts)</strong>
    </dt>
    <dd>
    Given some image data, find the results of performing a resize, using the default filter.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">Bytes</span></span>
         Input image, in RGB form.
        </li>
        <li><span class="parameter">iw</span>
            <span class="types"><span class="type">uint</span></span>
         Input image width...
        </li>
        <li><span class="parameter">ih</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">ow</span>
            <span class="types"><span class="type">uint</span></span>
         Output image width...
        </li>
        <li><span class="parameter">oh</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">nchannels</span>
            <span class="types"><span class="type">uint</span></span>
         Number of color channels.
        </li>
        <li><span class="parameter">opts</span>
            <span class="types">optional <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Resize options, as per <a href="../modules/ops.html#box_filter">box_filter</a> (although strides default to <em>w</em> * 3, instead).
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">Bytes</span></span>
        On success, as per <a href="../modules/ops.html#box_filter">box_filter</a>; output will be in RGB form.
    </ol>
     <h3>Or</h3>
    <ol>
        <li>
        <strong>nil</strong>, indicating an error.</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Error message.</li>
    </ol>




</dd>
    <dt>
    <a name = "resize_rgba"></a>
    <strong>resize_rgba (input, iw, ih, ow, oh, opts)</strong>
    </dt>
    <dd>
    Given some image data, find the results of performing a resize, using bilinear filtering.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">Bytes</span></span>
         Input image, in RGBA form.
        </li>
        <li><span class="parameter">iw</span>
            <span class="types"><span class="type">uint</span></span>
         Input image width...
        </li>
        <li><span class="parameter">ih</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">ow</span>
            <span class="types"><span class="type">uint</span></span>
         Output image width...
        </li>
        <li><span class="parameter">oh</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">opts</span>
            <span class="types">optional <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Resize options, as per <a href="../modules/ops.html#box_filter">box_filter</a>.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">Bytes</span></span>
        On success, as per <a href="../modules/ops.html#box_filter">box_filter</a>; output will be in RGBA form.
    </ol>
     <h3>Or</h3>
    <ol>
        <li>
        <strong>nil</strong>, indicating an error.</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Error message.</li>
    </ol>




</dd>
    <dt>
    <a name = "resize_subpixel"></a>
    <strong>resize_subpixel (input, iw, ih, ow, oh, nchannels, xscale, yscale, xoff, yoff, opts)</strong>
    </dt>
    <dd>
    Variant of <a href="../modules/ops.html#resize_custom">resize_custom</a> that takes an explicit scale for subpixel correctness.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">Bytes</span></span>
         As per <a href="../modules/ops.html#resize_custom">resize_custom</a>.
        </li>
        <li><span class="parameter">iw</span>
            <span class="types"><span class="type">uint</span></span>
         Input image width...
        </li>
        <li><span class="parameter">ih</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">ow</span>
            <span class="types"><span class="type">uint</span></span>
         Output image width...
        </li>
        <li><span class="parameter">oh</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">nchannels</span>
            <span class="types"><span class="type">uint</span></span>
         Number of color channels.
        </li>
        <li><span class="parameter">xscale</span>
            <span class="types"><span class="type">number</span></span>
         Scale factor along x-axis... (For some sense of the numbers, <a href="../modules/ops.html#resize_region">resize_region</a>
 could be emulated by setting this to <code>(ow / iw) / (s1 - s0)</code>...)
        </li>
        <li><span class="parameter">yscale</span>
            <span class="types"><span class="type">number</span></span>
         ...and y-axis. (...this to <code>(oh / ih) / (t1 - t0)</code>...)
        </li>
        <li><span class="parameter">xoff</span>
            <span class="types"><span class="type">number</span></span>
         Offset along x-axis, to upper-left corner... (...this to <code>s0 * ow / (s1 - s0)</code>...)
        </li>
        <li><span class="parameter">yoff</span>
            <span class="types"><span class="type">number</span></span>
         ...and y-axis. (...and this to <code>t0 * oh / (t1 - t0)</code>.)
        </li>
        <li><span class="parameter">opts</span>
            <span class="types">optional <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         As per <a href="../modules/ops.html#resize_custom">resize_custom</a>.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">Bytes</span></span>
        On success, as per <a href="../modules/ops.html#box_filter">box_filter</a>; will match <em>input</em> in form.
    </ol>
     <h3>Or</h3>
    <ol>
        <li>
        <strong>nil</strong>, indicating an error.</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Error message.</li>
    </ol>




</dd>
    <dt>
    <a name = "rotate"></a>
    <strong>rotate (input, w, h, angle, opts)</strong>
    </dt>
    <dd>
    Given some image data, find the results of performing rotation. </p>

<p> Any non-trivial rotation will leave gaps. Unwritten pixels will be transparent.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">Bytes</span></span>
         Input image, in RGBA form.
        </li>
        <li><span class="parameter">w</span>
            <span class="types"><span class="type">uint</span></span>
         Width of <em>input</em>...
        </li>
        <li><span class="parameter">h</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">angle</span>
            <span class="types"><span class="type">number</span></span>
         Rotation angle, in radians.
        </li>
        <li><span class="parameter">opts</span>
            <span class="types">optional <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Rotate options, as per <a href="../modules/ops.html#box_filter">box_filter</a>.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">Bytes</span></span>
        On success, as per <a href="../modules/ops.html#box_filter">box_filter</a>.</li>
        <li>
           <span class="types"><span class="type">uint</span></span>
        Width, after rotation...</li>
        <li>
           <span class="types"><span class="type">uint</span></span>
        ...and height.</li>
    </ol>
     <h3>Or</h3>
    <ol>
        <li>
        <strong>nil</strong>, indicating an error.</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Error message.</li>
    </ol>




</dd>
    <dt>
    <a name = "unorm8s_to_floats"></a>
    <strong>unorm8s_to_floats (input, w, h, opts)</strong>
    </dt>
    <dd>
    Converts an image from normalized unsigned 8-bit to floating-point form, i.e.  unsigned bytes in
 [0, 255] are remapped to [0, 1].


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">Bytes</span></span>
         Input image, in RGBA form (or according to <em>channels</em>).
        </li>
        <li><span class="parameter">w</span>
            <span class="types"><span class="type">uint</span></span>
         Width of <em>input</em>...
        </li>
        <li><span class="parameter">h</span>
            <span class="types"><span class="type">uint</span></span>
         ...and height.
        </li>
        <li><span class="parameter">opts</span>
            <span class="types">optional <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Conversion options. At the moment, the only option is <strong>channels</strong>, describing the
 number of channels per pixel (by default 4, in keeping with RGBA).
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">Bytes</span></span>
        On success, the converted result, in floating-point form.
    </ol>
     <h3>Or</h3>
    <ol>
        <li>
        <strong>nil</strong>, indicating an error.</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Error message.</li>
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="../modules/ops.html#floats_to_unorm8s">floats_to_unorm8s</a>
    </ul>


</dd>
</dl>
    <h2 class="section-header "><a name="Tables"></a>Tables</h2>

    <dl class="function">
    <dt>
    <a name = "DataType"></a>
    <strong>DataType</strong>
    </dt>
    <dd>
    Data representations in the resize APIs.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">UINT8</span>
         Components are 8-bit unsigned integers, i.e. 0 to 255 (typical for images)...
        </li>
        <li><span class="parameter">UINT16</span>
         ...are 16-bit unsigned integers...
        </li>
        <li><span class="parameter">UINT32</span>
         ...or are 32-bit unsigned integers.
        </li>
        <li><span class="parameter">FLOAT</span>
         Components are single-precision (32-bit) floating point numbers.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "EdgeMode"></a>
    <strong>EdgeMode</strong>
    </dt>
    <dd>
    How resizes handle sampling outside the image.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">CLAMP</span>
         Samples are clamped to the nearest edge value, e.g. position <code>0</code> snaps to <code>1</code> and
 <em>n</em> + 1 to <em>n</em>.
        </li>
        <li><span class="parameter">REFLECT</span>
         Samples reflect back across the image, e.g. position <em>n</em> + 3 maps to <em>n</em> - 3.
        </li>
        <li><span class="parameter">WRAP</span>
         Samples wrap around to the other side of the image, e.g. position <em>n</em> + 1 maps to <code>1</code>.
        </li>
        <li><span class="parameter">ZERO</span>
         Samples are read back as values of <code>0</code>.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Filter"></a>
    <strong>Filter</strong>
    </dt>
    <dd>
    How pixels are filtered during resizes.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">DEFAULT</span>
         Use the appropriate default filter for an operation, cf. the summary above.
        </li>
        <li><span class="parameter">BOX</span>
         A trapezoid with one-pixel-wide ramps; same result as box for integer scale ratios.
        </li>
        <li><span class="parameter">TRIANGLE</span>
         On upsampling, produces same results as bilinear texture filtering.
        </li>
        <li><span class="parameter">CUBICBSPLINE</span>
         The cubic B-spline (aka Mitchell-Netrevali with <strong>B</strong> = 1, <strong>C</strong> = 0). Gaussian-esque.
        </li>
        <li><span class="parameter">CATMULLROM</span>
         An interpolating cubic spline.
        </li>
        <li><span class="parameter">MITCHELL</span>
         Mitchell-Netrevali filter with <strong>B</strong> = <strong>C</strong> = &#8531;.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "ColorSpace"></a>
    <strong>ColorSpace</strong>
    </dt>
    <dd>
    How to interpret colors.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">LINEAR</span>
         Colors map linearly from [0, 255] to [0, 1].
        </li>
        <li><span class="parameter">SRGB</span>
         Colors follow an <a href="https://en.wikipedia.org/wiki/SRGB">sRGB</a> gamma ramp.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "ResizeFlags"></a>
    <strong>ResizeFlags</strong>
    </dt>
    <dd>
    Optional flags to apply to resize operation.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">ALPHA_PREMULTIPLIED</span>
         Set this flag if your texture has premultiplied alpha. Otherwise, alpha-weighted
 resampling will be used (effectively premultiplying, resampling, then unpremultiplying).
        </li>
        <li><span class="parameter">ALPHA_USES_COLORSPACE</span>
         The specified alpha channel should be handled as gamma-corrected value even
 when doing sRGB operations.
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2018-07-25 17:12:14 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
